@using AzureSkyMedia.PlatformServices;

@{
    MediaStream[] mediaStreams = Model;
    string liveStreamImage = this.Context.Request.Query["live"] == "on" ? "MediaLiveStreamOn.png" : "MediaLiveStreamOff.png";
}

<table class="mediaControls">
    <tr>
    @if (ViewData.ContainsKey("accountContext"))
    {
        <td id="userButtonLeft1">
            @Html.Partial("SiteButton", new string[] { "mediaProcessorPresets", "MediaProcessorPresets.png", "window.location.href = '/preset'" })
        </td>
        <td id="userButtonLeft2">
            @Html.Partial("SiteButton", new string[] { "mediaFileWorkflow", "MediaUpload.png", "window.location.href = '/upload'" })
        </td>
        <td id="userButtonLeft3">
            @Html.Partial("SiteButton", new string[] { "mediaAssetWorkflow", "MediaWorkflow.png", "window.location.href = '/workflow'" })
        </td>
    }
        <td class="streamTuner">
            <table>
                <tr>
                    <td>
                        @Html.Partial("SiteButton", new string[] { "mediaStreamLeft", "MediaStreamLeft.png", "SetStreamSlider('left')" })
                    </td>
                    <td class="streamNumber sideLeft">
                        <span>@(mediaStreams.Length == 0 ? 0 : 1)</span>
                    </td>
                    <td>
                        <div id="streamSlider" class="streamSlider"></div>
                    </td>
                    <td class="streamNumber sideRight">
                        @mediaStreams.Length
                    </td>
                    <td>
                        @Html.Partial("SiteButton", new string[] { "mediaStreamRight", "MediaStreamRight.png", "SetStreamSlider('right')" })
                    </td>
                </tr>
            </table>
        </td>
    @if (ViewData.ContainsKey("accountContext"))
    { 
        <td id="userButtonRight1">
            @Html.Partial("SiteButton", new string[] { "mediaAssetFiles", "MediaAssetFiles.png", "window.location.href = '/asset'" })
        </td>
        <td id="userButtonRight2">
            @Html.Partial("SiteButton", new string[] { "mediaStreamLive", liveStreamImage, "ToggleLiveStream(this)" })
        </td>
        <td id="userButtonRight3">
            @Html.Partial("SiteButton", new string[] { "mediaInsightSearch", "MediaSearch.png", "window.location.href = '/search'" })
        </td>
    }
    </tr>
</table>